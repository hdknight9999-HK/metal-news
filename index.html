<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒå…³é”®é‡‘å±æƒ…æŠ¥å±€ (AI/å…‰ä¼/ç¨€ç¼ºèµ„æº)</title>
    <style>
        :root {
            --bg-color: #0f172a;       /* æ·±è“èƒŒæ™¯ */
            --card-bg: #1e293b;        /* å¡ç‰‡èƒŒæ™¯ */
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --gold: #fbbf24;           /* é»„é‡‘ */
            --strategic: #a855f7;      /* ç¨€ç¼ºé‡‘å±(é”‘/é“Ÿ) - ç´«è‰² */
            --industry: #38bdf8;       /* å·¥ä¸š/å…‰ä¼ - è“è‰² */
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: rgba(15, 23, 42, 0.95);
            padding: 15px 20px;
            border-bottom: 1px solid #334155;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 { margin: 0; font-size: 22px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
        .live-badge { 
            font-size: 12px; background: #22c55e; color: #000; 
            padding: 2px 6px; border-radius: 4px; font-weight: bold;
        }
        
        /* å¸ƒå±€ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 360px 1fr; /* å·¦ä¾§è¡Œæƒ…ï¼Œå³ä¾§æ–°é—» */
            gap: 25px;
        }
        
        /* ä¾§è¾¹æ  */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .price-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid #334155;
        }
        .sidebar-note {
            font-size: 12px; color: #64748b; background: #0f172a; padding: 10px; border-radius: 6px;
        }

        /* æ ‡ç­¾é¡µè¿‡æ»¤ */
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: #334155;
            border: 1px solid #475569;
            color: #cbd5e1;
            padding: 8px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .filter-btn:hover { background: #475569; }
        .filter-btn.active { 
            background: var(--strategic); 
            color: white; 
            border-color: var(--strategic); 
            font-weight: bold;
            box-shadow: 0 0 10px rgba(168, 85, 247, 0.4);
        }
        .filter-btn.active.gold-btn { background: var(--gold); border-color: var(--gold); color: black; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }

        /* æ–°é—»å¡ç‰‡ */
        .news-grid { display: grid; gap: 15px; }
        
        .news-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #334155;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s;
        }
        .news-card:hover { transform: translateY(-2px); border-color: var(--text-muted); }
        
        /* å·¦ä¾§å½©è‰²æŒ‡ç¤ºæ¡ */
        .news-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; }
        .news-card.type-strategic::before { background: var(--strategic); } /* é”‘/é“Ÿ */
        .news-card.type-precious::before { background: var(--gold); }      /* é»„é‡‘ */
        .news-card.type-industry::before { background: var(--industry); }  /* é“œ/å…‰ä¼ */

        .news-meta {
            font-size: 12px; color: var(--text-muted); margin-bottom: 8px;
            display: flex; align-items: center; gap: 10px;
        }
        .tag {
            padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;
        }
        .tag-strategic { background: rgba(168, 85, 247, 0.2); color: #d8b4fe; }
        .tag-gold { background: rgba(251, 191, 36, 0.2); color: #fcd34d; }
        .tag-ind { background: rgba(56, 189, 248, 0.2); color: #7dd3fc; }

        .news-title { font-size: 18px; margin: 0 0 10px 0; line-height: 1.4; }
        .news-title a { color: var(--text-main); text-decoration: none; }
        .news-title a:hover { text-decoration: underline; }
        .news-desc { font-size: 14px; color: #cbd5e1; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        .loading-msg { text-align: center; padding: 40px; color: var(--text-muted); grid-column: 1 / -1; }
        
        /* å“åº”å¼ */
        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
            .sidebar { order: -1; } /* æ‰‹æœºä¸Šè¡Œæƒ…åœ¨æœ€ä¸Šé¢ */
        }
    </style>
</head>
<body>

<header>
    <div class="header-content">
        <h1>ğŸš€ å…¨çƒå…³é”®é‡‘å±æƒ…æŠ¥ <span class="live-badge">LIVE</span></h1>
        <div style="font-size: 12px; color: #94a3b8; text-align: right;">
            è¦†ç›–: é»„é‡‘ Â· é“œ Â· é”‘(AI) Â· é“Ÿ(å…‰ä¼)
        </div>
    </div>
</header>

<div class="container">
    <!-- å·¦ä¾§ï¼šè¡Œæƒ…çœ‹æ¿ -->
    <aside class="sidebar">
        <div class="price-card">
            <h3 style="margin-top:0; border-bottom:1px solid #334155; padding-bottom:10px;">ğŸ“Š æ ¸å¿ƒèµ„äº§è¡Œæƒ…</h3>
            <!-- TradingView Widget -->
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                {
                "colorTheme": "dark",
                "dateRange": "12M",
                "showChart": false,
                "locale": "zh_CN",
                "largeChartUrl": "",
                "isTransparent": true,
                "showSymbolLogo": true,
                "width": "100%",
                "height": "550",
                "tabs": [
                    {
                    "title": "ç¨€ç¼ºæˆ˜ç•¥é‡‘å±",
                    "symbols": [
                        { "s": "AMEX:REMX", "d": "ç¨€æœ‰é‡‘å±ETF (é£å‘æ ‡)" },
                        { "s": "SZSE:002155", "d": "æ¹–å—é»„é‡‘ (é”‘é¾™å¤´)" },
                        { "s": "SZSE:000960", "d": "é”¡ä¸šè‚¡ä»½ (é“Ÿé¾™å¤´)" },
                        { "s": "SZSE:002460", "d": "èµ£é”‹é”‚ä¸š" }
                    ]
                    },
                    {
                    "title": "è´µé‡‘å±/èƒ½æº",
                    "symbols": [
                        { "s": "TVC:GOLD", "d": "ç°è´§é»„é‡‘" },
                        { "s": "TVC:SILVER", "d": "ç°è´§ç™½é“¶" },
                        { "s": "NYMEX:CL1!", "d": "åŸæ²¹" }
                    ]
                    },
                    {
                    "title": "AIä¸å·¥ä¸š",
                    "symbols": [
                        { "s": "COMEX:HG1!", "d": "é“œ (æ•°æ®ä¸­å¿ƒ)" },
                        { "s": "LME:AL", "d": "é“ (å…‰ä¼è¾¹æ¡†)" }
                    ]
                    }
                ]
                }
                </script>
            </div>
            <div class="sidebar-note">
                <strong>ğŸ’¡ ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°â€œé”‘/é“Ÿâ€ç°è´§ä»·æ ¼ï¼Ÿ</strong><br>
                å°é‡‘å±é€šå¸¸ä¸ºåœºå¤–æ’®åˆäº¤æ˜“(OTC)ï¼Œæ— å…¬å¼€å…è´¹Kçº¿ã€‚è¯·å…³æ³¨ä¸Šæ–¹â€œæ¹–å—é»„é‡‘(é”‘)â€å’Œâ€œé”¡ä¸šè‚¡ä»½(é“Ÿ)â€çš„è‚¡ä»·ï¼Œå®ƒä»¬æ˜¯æœ€æ•æ„Ÿçš„ä»·æ ¼é£å‘æ ‡ã€‚
            </div>
        </div>
    </aside>

    <!-- å³ä¾§ï¼šæ–°é—»æµ -->
    <main>
        <div class="filter-bar">
            <button class="filter-btn active" onclick="filterNews('all', this)">å…¨éƒ¨æƒ…æŠ¥</button>
            <button class="filter-btn" onclick="filterNews('type-strategic', this)">ğŸ§ª é”‘/é“Ÿ/ç¨€ç¼º (AI+å…‰ä¼)</button>
            <button class="filter-btn gold-btn" onclick="filterNews('type-precious', this)">ğŸ’° é»„é‡‘/ç™½é“¶</button>
            <button class="filter-btn" onclick="filterNews('type-industry', this)">ğŸ­ é“œ/é”‚/å…‰ä¼</button>
        </div>

        <div id="news-grid" class="news-grid">
            <div class="loading-msg">æ­£åœ¨æ‰«æå…¨çƒæ•°æ®æº...<br>æœç´¢å…³é”®è¯ï¼šé”‘ã€é“Ÿã€HJTç”µæ± ã€AIç®—åŠ›ææ–™</div>
        </div>
    </main>
</div>

<script>
    // é…ç½®Bingæ–°é—»æœç´¢æº (RSSè½¬JSON)
    const RSS_PROXY = "https://api.rss2json.com/v1/api.json?rss_url=";
    
    const SOURCES = [
        {
            name: "æˆ˜ç•¥å°é‡‘å±",
            type: "type-strategic",
            tagClass: "tag-strategic",
            // é‡ç‚¹æœç´¢: é”‘, é“Ÿ, é•“, é”—
            keywords: "é”‘ä»·æ ¼ OR é“Ÿä»·æ ¼ OR æ¹–å—é»„é‡‘ é”‘ OR å¼‚è´¨ç»“ é“Ÿ OR æˆ˜ç•¥é‡‘å± ç®¡åˆ¶",
            url: "https://www.bing.com/news/search?q=%E9%94%91%E4%BB%B7%E6%A0%BC+OR+%E9%93%9F%E4%BB%B7%E6%A0%BC+OR+%E6%B9%96%E5%8D%97%E9%BB%84%E9%87%91+%E9%94%91+OR+%E5%BC%82%E8%B4%A8%E7%BB%93+%E9%93%9F&format=rss"
        },
        {
            name: "AIä¸æ–°èƒ½æº",
            type: "type-industry",
            tagClass: "tag-ind",
            // é‡ç‚¹æœç´¢: é“œ, é”‚, å…‰ä¼
            keywords: "é“œä»· OR ç¢³é…¸é”‚ OR å…‰ä¼ é“¶æµ† OR AIç®—åŠ› ç¡¬ä»¶ ææ–™",
            url: "https://www.bing.com/news/search?q=%E9%93%9C%E4%BB%B7+OR+%E7%A2%B3%E9%85%B8%E9%94%82+OR+%E5%85%89%E4%BC%8F+%E9%93%B6%E6%B5%86+OR+AI%E7%AE%97%E5%8A%9B+%E6%9D%90%E6%96%99&format=rss"
        },
        {
            name: "è´µé‡‘å±",
            type: "type-precious",
            tagClass: "tag-gold",
            // é‡ç‚¹æœç´¢: é»„é‡‘, ç™½é“¶
            keywords: "é»„é‡‘ä»·æ ¼ OR ç¾è”å‚¨ é‡‘ä»· OR ç™½é“¶èµ°åŠ¿",
            url: "https://www.bing.com/news/search?q=%E9%BB%84%E9%87%91%E4%BB%B7%E6%A0%BC+OR+%E7%99%BD%E9%93%B6%E8%B5%B0%E5%8A%BF&format=rss"
        }
    ];

    let allNewsData = [];

    async function fetchAllNews() {
        const container = document.getElementById('news-grid');
        const promises = SOURCES.map(source => {
            return fetch(RSS_PROXY + encodeURIComponent(source.url))
                .then(res => res.json())
                .then(data => {
                    if(data.status === 'ok') {
                        return data.items.map(item => ({
                            ...item,
                            sourceLabel: source.name,
                            categoryType: source.type,
                            tagClass: source.tagClass
                        }));
                    }
                    return [];
                })
                .catch(err => []);
        });

        try {
            const results = await Promise.all(promises);
            allNewsData = results.flat().sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
            
            // ç®€å•å»é‡
            const seen = new Set();
            allNewsData = allNewsData.filter(item => {
                if(seen.has(item.title)) return false;
                seen.add(item.title);
                return true;
            });

            renderNews(allNewsData);

        } catch (error) {
            container.innerHTML = `<div class="loading-msg" style="color:red">æ•°æ®åŠ è½½å—é˜»ï¼Œè¯·åˆ·æ–°é‡è¯•ã€‚</div>`;
        }
    }

    function renderNews(newsItems) {
        const container = document.getElementById('news-grid');
        if (newsItems.length === 0) {
            container.innerHTML = '<div class="loading-msg">æš‚æ— æœ€æ–°æ•°æ®ã€‚</div>';
            return;
        }

        container.innerHTML = newsItems.map(item => {
            const date = new Date(item.pubDate);
            const timeStr = isNaN(date.getTime()) ? 'åˆšåˆš' : date.toLocaleString('zh-CN', {month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit'});
            const desc = item.description.replace(/<[^>]+>/g, '').substring(0, 120) + '...';

            return `
                <div class="news-card ${item.categoryType}">
                    <div class="news-meta">
                        <span class="tag ${item.tagClass}">${item.sourceLabel}</span>
                        <span>${timeStr}</span>
                    </div>
                    <h3 class="news-title">
                        <a href="${item.link}" target="_blank">${item.title}</a>
                    </h3>
                    <div class="news-desc">${desc}</div>
                </div>
            `;
        }).join('');
    }

    window.filterNews = function(type, btn) {
        document.querySelectorAll('.filter-btn').forEach(b => {
            b.classList.remove('active');
            if(b.classList.contains('gold-btn')) b.classList.remove('active'); // ç‰¹æ®Šå¤„ç†é‡‘è‰²æŒ‰é’®
        });
        btn.classList.add('active');

        if (type === 'all') {
            renderNews(allNewsData);
        } else {
            renderNews(allNewsData.filter(item => item.categoryType === type));
        }
    }

    fetchAllNews();
</script>

</body>
</html>
